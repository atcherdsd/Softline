(()=>{"use strict";var t,e,i={817:(t,e,i)=>{i.d(e,{BU:()=>n,sg:()=>o,Fr:()=>s});const s=()=>window.innerWidth<=768;function o(t,e=250){let i;return function(...s){clearTimeout(i),i=setTimeout((()=>t.apply(this,s)),e)}}const n=()=>{0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")?document.documentElement.classList.add("webp"):document.documentElement.classList.add("no-webp")}}},s={};function o(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={exports:{}};return i[t](n,n.exports,o),n.exports}o.m=i,o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.f={},o.e=t=>Promise.all(Object.keys(o.f).reduce(((e,i)=>(o.f[i](t,e),e)),[])),o.u=t=>t+"."+{427:"b827c62c6584c2ccd55b",839:"267cc263c978bdeb6ab8"}[t]+".js",o.miniCssF=t=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="softline:",o.l=(i,s,n,r)=>{if(t[i])t[i].push(s);else{var a,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var d=c[h];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==e+n){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",e+n),a.src=i),t[i]=[s];var u=(e,s)=>{a.onerror=a.onload=null,clearTimeout(g);var o=t[i];if(delete t[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((t=>t(s))),e)return e(s)},g=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=i[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t})(),(()=>{var t={792:0};o.f.j=(e,i)=>{var s=o.o(t,e)?t[e]:void 0;if(0!==s)if(s)i.push(s[2]);else{var n=new Promise(((i,o)=>s=t[e]=[i,o]));i.push(s[2]=n);var r=o.p+o.u(e),a=new Error;o.l(r,(i=>{if(o.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var n=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",a.name="ChunkLoadError",a.type=n,a.request=r,s[1](a)}}),"chunk-"+e,e)}};var e=(e,i)=>{var s,n,[r,a,l]=i,c=0;if(r.some((e=>0!==t[e]))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);l&&l(o)}for(e&&e(i);c<r.length;c++)n=r[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0},i=self.webpackChunksoftline=self.webpackChunksoftline||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var n=o(817);class r{static events={closeAllCards:"accordion:closeAll"};constructor(t){this.buttonHeight=null,this.card=t,this.button=this.card.querySelector(".accordion-card__button"),this.content=this.card.querySelector(".accordion-card__content-inner"),this.button&&this.content&&(this.cardHeightWithoutContent=this.getCardHeightWithoutContent(),this.card.addEventListener("click",this.onClick))}getCardHeightWithoutContent(){this.buttonHeight=this.button.offsetHeight;const t=window.getComputedStyle(this.button),e=parseInt(t.paddingBottom)||0;return this.buttonHeight+e/2}onClick=t=>{(0,n.Fr)()&&(t.target.closest("a, button, input, textarea")&&!t.target.closest(".accordion-card__button")||(this.card.classList.contains("active")?this.close():(this.emitCloseOthers(),this.open())))};open(){const t=this.content.scrollHeight,e=this.cardHeightWithoutContent+t,i=e>240?e:240;this.card.classList.add("active"),this.card.style.height=`${i}px`,this.content.style.maxHeight=`${t}px`}close(){this.card.classList.remove("active"),this.card.style.height=`${this.buttonHeight}px`,this.content.style.maxHeight="0"}onDesktopResize(){this.card.classList.remove("active"),this.card.style.height="",this.content.style.maxHeight=""}emitCloseOthers(){const t=new CustomEvent(r.events.closeAllCards,{detail:{except:this.card},bubbles:!0});this.card.dispatchEvent(t)}}class a{constructor(t){this.container=document.querySelector(t),this.cards=[],this.container&&(this.init(),window.addEventListener("resize",(0,n.sg)(this.onResize,150)))}init(){const t=this.container.querySelectorAll(".accordion-card");this.cards=Array.from(t).map((t=>new r(t))),this.container.addEventListener(r.events.closeAllCards,this.handleCloseAll)}handleCloseAll=t=>{const e=t.detail.except;this.cards.forEach((t=>{t.card!==e&&t.close()}))};onResize=()=>{(0,n.Fr)()||this.cards.forEach((t=>t.onDesktopResize()))}}class l{constructor(t,e,i){this.svgRoot=t,this.citiesData=e,this.controlsContainer=i,this.isInitial=!0,this.isOpenedPanel=!1,this.activeRegionButton=null,this.circleFirstKeys=Object.keys(this.citiesData.circleFirst),this.labelFirstKeys=Object.keys(this.citiesData.labelFirst),this.toggleButton=this.controlsContainer.querySelector(".map__toggle-button"),this.toggleButton?.addEventListener("click",this.toggleControlPanel),this.tabs=this.controlsContainer.querySelectorAll(".map__tab"),this.controlPanel=this.controlsContainer.querySelector(".map__cities-panel"),this.controlPanelRegionButtons=this.controlPanel.querySelectorAll(".map__cities-region")}init(){this.setCityDataAttributes(),this.setupFilterControls()}setCityDataAttributes(){if(!this.circleFirstKeys||!this.labelFirstKeys||!this.citiesData)return;const t=(0,n.Fr)()?document.getElementById("city-labels-mobile"):document.getElementById("city-labels");t&&this._setAttributesToCityPairs(t.children,!1,this.circleFirstKeys,this.citiesData.circleFirst);const e=(0,n.Fr)()?document.getElementById("labels-city-mobile"):document.getElementById("labels-city");e&&this._setAttributesToCityPairs(e.children,!0,this.labelFirstKeys,this.citiesData.labelFirst)}_setAttributesToCityPairs=(t,e,i,s)=>{const o=Array.from(t);let n=0;for(let t=0;t<o.length;t+=2){const r=o[t],a=o[t+1];if(!r||!a)continue;const l=i[n++];if(!l)break;const c=s[l],[h,d]=e?[r,a]:[a,r];"circle"===d.tagName.toLowerCase()&&(d.setAttribute("data-city",l),d.setAttribute("data-region",c.region)),"path"===h.tagName.toLowerCase()&&h.setAttribute("data-city-label",l)}};setupFilterControls(){if(!this.controlsContainer)return;const t=this.controlsContainer.querySelectorAll("[data-filter]");if(t.length){if(this.isInitial){const e=Array.from(t).find((t=>"all"===t.dataset.filter));e&&(this.applyFilter("all"),this.highlightActiveButton(e,t),this.isInitial=!1)}this.filterButtonHandlers=new Map,t.forEach((e=>{const i=()=>this.onFilterButtonClick(e,t);this.filterButtonHandlers.set(e,i),e.addEventListener("click",i)}))}}onFilterButtonClick(t,e){const i=t.dataset.filter,s=Array.from(this.controlPanelRegionButtons).filter((t=>"city"===t.dataset.filterType));!(0,n.Fr)()||(0,n.Fr)()&&s.includes(t)||!Array.from(this.controlPanelRegionButtons).includes(t)?(this.applyFilter(i),this.highlightActiveButton(t,e),this.syncButtonsState(t),t.closest(".map__cities-panel")&&this.hideControlPanel()):this.handleRegionControlsOnMobile(t)}handleRegionControlsOnMobile(t){this.closeAllRegionButtons();const e=t.closest(".map__cities-group")?.querySelector(".map__cities-list");if(this.activeRegionButton&&this.activeRegionButton===t)this.closeCurrentCitiesButtonsList(t,e);else{t.classList.add("active");const i=t.querySelector("img");i?.classList.add("opened"),e.classList.add("opened"),this.activeRegionButton=t}}closeAllRegionButtons(){const t=Array.from(this.controlPanelRegionButtons).filter((t=>"region"===t.dataset.filterType));t.length&&t.forEach((t=>{t.classList.remove("active"),t.querySelector("img")?.classList.remove("opened");const e=t.closest(".map__cities-group")?.querySelector(".map__cities-list");e.classList.remove("opened")}))}closeCurrentCitiesButtonsList(t,e){t.classList.remove("active"),t.querySelector("img")?.classList.remove("opened"),e.classList.remove("opened"),this.activeRegionButton=null}applyFilter(t){const e=this.svgRoot.querySelectorAll("circle[data-city]"),i=this.svgRoot.querySelectorAll("path[data-city-label]");e.forEach((t=>t.classList.remove("visible"))),i.forEach((t=>t.classList.remove("visible"))),e.forEach((e=>{const i=e.dataset.region,s=e.dataset.city;"all"!==t&&i!==t&&s!==t||e.classList.add("visible")})),i.forEach((e=>{const i=e.dataset.cityLabel;"all"!==t&&this.citiesData.circleFirst[i]?.region!==t&&this.citiesData.labelFirst[i]?.region!==t&&i!==t||e.classList.add("visible")}))}highlightActiveButton(t,e){e.forEach((t=>t.classList.remove("active"))),t.classList.add("active")}hideControlPanel(){this.controlPanel&&(this.controlPanel.classList.add("hidden"),this.isOpenedPanel=!1,this.toggleButtonIcon(),this.closeAllRegionButtons(),this.activeRegionButton=null,this.toggleTabs())}toggleControlPanel=()=>{this.controlPanel&&(this.controlPanel.classList[this.isOpenedPanel?"add":"remove"]("hidden"),this.isOpenedPanel=!this.isOpenedPanel,this.toggleButtonIcon(),this.isOpenedPanel||(this.closeAllRegionButtons(),this.activeRegionButton=null),this.toggleTabs())};toggleTabs(){this.tabs.length&&this.tabs.forEach((t=>{this.isOpenedPanel?t.setAttribute("disabled",!0):t.removeAttribute("disabled")})),this.svgRoot.closest(".map__map-wrapper").classList[this.isOpenedPanel?"add":"remove"]("faded")}toggleButtonIcon(){const t=this.toggleButton.querySelector(".map__toggle-button-icon");t?.classList[this.isOpenedPanel?"add":"remove"]("opened")}syncButtonsState(t){const e=Array.from(this.tabs).filter((t=>"all"!==t.dataset.filter)),i=Array.from(this.controlPanelRegionButtons);if(e.includes(t)){const e=i.find((e=>e.dataset.filter===t.dataset.filter));e?.classList.add("active")}if(i.includes(t)){const i=e.find((e=>e.dataset.filter===t.dataset.filter));i?.classList.add("active")}}destroy(){this.toggleButton?.removeEventListener("click",this.toggleControlPanel),this.filterButtonHandlers.forEach(((t,e)=>{e.removeEventListener("click",t)})),this.filterButtonHandlers.clear()}}const c={circleFirst:{saintPetersburg:{name:"Санкт-Петербург",region:"northwest"},moscow:{name:"Москва",region:"moscow"},voronezh:{name:"Воронеж",region:"center"},belgorod:{name:"Белгород",region:"center"},rostovOnDon:{name:"Ростов-на-Дону",region:"south"},krasnodar:{name:"Краснодар",region:"south"},kazan:{name:"Казань",region:"volga"},samara:{name:"Самара",region:"volga"},nizhnyNovgorod:{name:"Нижний Новгород",region:"volga"},orenburg:{name:"Оренбург",region:"volga"},ekaterinburg:{name:"Екатеринбург",region:"ural"},perm:{name:"Пермь",region:"ural"},surgut:{name:"Сургут",region:"ural"},tyumen:{name:"Тюмень",region:"ural"},novosibirsk:{name:"Новосибирск",region:"siberia"},krasnoyarsk:{name:"Красноярск",region:"siberia"},irkutsk:{name:"Иркутск",region:"siberia"},omsk:{name:"Омск",region:"siberia"},izhevsk:{name:"Ижевск",region:"ural"},chelyabinsk:{name:"Челябинск",region:"ural"},ufa:{name:"Уфа",region:"volga"},volgograd:{name:"Волгоград",region:"south"},yaroslavl:{name:"Ярославль",region:"center"},kaliningrad:{name:"Калинингад",region:"northwest"},vladivostok:{name:"Владивосток",region:"far-east"}},labelFirst:{khabarovsk:{name:"Хабаровск",region:"far-east"},tomsk:{name:"Томск",region:"siberia"}}};let h;(0,n.BU)();const d=()=>(0,n.Fr)()?"mobile":"desktop";let u=d();async function g(){const t=document.querySelector(".map__tabs-container");if(!t)return;const e=await async function(t){const e="mobile"===t?"./assets/svg/map-mobile.svg":"./assets/svg/map-desktop.svg",i="mobile"===t?".map__map-container-mobile":".map__map-container",s=document.querySelector(i);if(!s)return null;const o=await fetch(e),n=await o.text();return s.innerHTML=n,s.querySelector("svg")}(u);e&&(h=new l(e,c,t),h.init())}window.addEventListener("resize",(0,n.sg)((async()=>{const t=d();t!==u&&(u=t,h&&"function"==typeof h.destroy&&h.destroy(),h=null,await g())}),300)),async function(){await g(),new a(".business-directions__cards");const t=document.querySelector(".corporate-life");t&&new IntersectionObserver(((e,i)=>{e[0].isIntersecting&&(Promise.all([o.e(839),o.e(427)]).then(o.bind(o,427)).then((e=>{new(0,e.default)(t).init()})),i.unobserve(t))}),{rootMargin:"0px 0px 200px 0px"}).observe(t)}()})();
//# sourceMappingURL=main.a5f7895bc450d9d19e6d.js.map